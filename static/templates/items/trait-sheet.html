<form class="{{cssClass}}" autocomplete="off">
  <div class="skill-container-small">
    <div>
      <table>
        <tr>
          <th>
            <div class="item-img">
              <img class="item-img" src="{{img}}" title="{{img}}" alt="{{name}}" data-edit="img" width="128"
                   height="128"/></div>
          </th>
          <th>
            <div class="item-name">
              <label for="data.name">{{localize "TWODSIX.Items.Traits.TraitName"}}</label>
              <input id="data.name" name="name" type="text" value="{{name}}"/>
            </div>
          </th>
        </tr>
      </table>
    </div>
    <table>
      <thead>
        <tr>
          <td>{{localize "TWODSIX.Items.Traits.AttributeKey"}}</td>
          <td>{{localize "TWODSIX.Items.Traits.Mode"}}</td>
          <td>{{localize "TWODSIX.Items.Traits.EffectValue"}}</td>
          <td class="centre">
            {{#unless actor}}<a class="change-create" title='{{localize "TWODSIX.Items.Traits.CreateEffect"}}'>
              <i class="fas fa-plus"></i>
            </a>
            {{/unless}}
          </td>
        </tr>
      </thead>
      <tbody>
        {{#each data.changes as |change|}}
        <tr class="change-row" data-change-index="{{@index}}">
          {{#if ../actor}}
          <td>{{change.key}}</td>
          <td>{{lookup @root.ACTIVE_EFFECT_MODES change.mode}}</td>
          <td>{{change.value}}</td>
          <td></td>
          {{else}}
          <td><input type="text" data-type="key" value="{{change.key}}" data-dtype="String"></td>
          <td><select data-type="mode" value="{{change.mode}}">
          {{#each @root.ACTIVE_EFFECT_MODES as |mode key|}}
          {{#select change.mode}}
            <option value="{{key}}">{{mode}}</option>
          {{/select}}
          {{/each}}
          </select>
            </td>
          <td><input type="text" data-type="value" value="{{change.value}}" data-dtype="String"></td>
          <td class="centre">
            <a class="change-delete" data-index="{{@index}}" title='{{localize "TWODSIX.Items.Traits.DeleteEffect"}}'>
              <i class="fas fa-trash"></i>
            </a>
          </td>
          {{/if}}
        </tr>
        {{/each}}
      </tbody>
    </table>
    {{#if actor}}
    <button class="item-control effect-edit" data-effect-id="{{data.effect.data._id}}" title='{{localize "TWODSIX.Items.Traits.EditEffects"}}'>
      <i class="fas fa-sliders-h"></i> Edit effects
    </button>
    {{/if}}
    <div class="item-lvl">
      <label for="data.value" class="resource-label">{{localize "TWODSIX.Items.Skills.Level"}}
        <input id="data.value" type="text" name="data.value" value="{{data.value}}" data-dtype="Number"/></label>
    </div>
    <div class="item-prereq">
      <label for="data.prereq" class="resource-label">{{localize "TWODSIX.Items.Traits.Prerequisite"}}
        <input id="data.prereq" type="text" name="data.prereq" value="{{data.prereq}}"/>
      </label>
    </div>
    <div class="item-short">
      <label for="data.shortdescr" class="resource-label">{{localize "TWODSIX.Items.Equipment.ShortDescription"}}
        <input id="data.shortdescr" type="text" name="data.shortdescr" value="{{data.shortdescr}}"/>
      </label>
    </div>

    <div class="item-descr">
      <span class="resource-label">{{localize "TWODSIX.Items.Equipment.Description"}}</span>
      <div contenteditable="true" data-edit="data.description">{{{data.description}}}</div>
    </div>
    {{> "systems/twodsix/templates/items/parts/footer.html"}}
  </div>
</form>
