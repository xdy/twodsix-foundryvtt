<!-- LINKS -->
{{#if settings.showActorReferences}}
  <div>
    {{> "systems/twodsix/templates/items/parts/reference-footer.hbs"}}
  </div>
{{/if}}

<!-- TRAITS -->
<div><span class="pusher"></span>
  <span class="item-title">{{localize "TWODSIX.Actor.Items.TRAITS"}}</span>
  <div class="items-traits gear-header">
    <span class="item-name">{{localize "TWODSIX.Actor.Items.Name"}}</span>
    <span class="item-name centre">{{localize "TWODSIX.Actor.Skills.Level"}}</span>
    <span class="item-name centre">{{localize "TWODSIX.Actor.Items.ShortDescr"}}</span>
    <span class="item-name centre"><a class="item-control item-create"
        data-tooltip='{{localize "TWODSIX.Actor.Items.CreateItem"}}' data-type="trait" data-action="itemCreate"><i class="fa-solid fa-plus"></i></a></span>
  </div>
  <section class="item-list">
  {{#each container.trait as |item id|}}
  <div class="item gear" data-item-id="{{item.id}}">
    <ol class="ol-no-indent">
      <li class="flexrow" >
        <span class="items-traits">
          <span class="item-name showChat" data-action="showChat">{{item.name}}</span>
          <span class="item-name centre">{{item.system.value}}</span>
          <span class="item-name centre">{{item.system.shortdescr}}
            <ul>
              {{#each item.effects.contents.[0].changes as |change|}}
              <li>{{change.key}} {{lookup @root.ACTIVE_EFFECT_MODES change.mode}} {{change.value}}</li>
              {{/each}}
            </ul>
          </span>
          <span class="item-controls centre">
            <a class="item-control item-edit" data-tooltip='{{localize "TWODSIX.Actor.Items.EditItem"}}' data-action="itemEdit"><i
                class="fa-solid fa-pen-to-square"></i></a>
            <a class="item-control item-delete" data-tooltip='{{localize "TWODSIX.Actor.Items.DeleteItem"}}' data-action="itemDelete"><i class="fa-solid fa-trash"></i></a>
          </span>
        </span>
      </li>
    </ol>
  </div>
  {{/each}}
</section>
</div>

<!-- Psionic Abilities -->
<div><span class="pusher"></span>
  <span class="item-title">{{localize "TWODSIX.Actor.Items.PSIONIC_ABILITIES"}}</span>
  <div class="items-psiAbilities gear-header">
    <span class="item-name">{{localize "TWODSIX.Actor.Items.Name"}}</span>
    <span class="item-name centre">{{localize "TWODSIX.Actor.Skills.Level"}}</span>
    <span class="item-name centre">{{localize "TWODSIX.Items.Psionics.Pts"}}</span>
    <span class="item-name centre">{{localize "TWODSIX.Actor.Items.Damage"}}</span>
    <span class="item-name centre">{{localize "TWODSIX.Actor.Items.ShortDescr"}}</span>
    <span class="item-name centre"><a class="item-control item-create"
        data-tooltip='{{localize "TWODSIX.Actor.Items.CreateItem"}}' data-type="psiAbility" data-action="itemCreate"><i class="fa-solid fa-plus"></i></a></span>
  </div>
  <section class="item-list">
    {{#each container.psiAbility as |item id|}}
      <div class="item gear" data-item-id="{{item.id}}">
        <ol class="ol-no-indent">
          <li class="flexrow" >
            <span class="items-psiAbilities">
              <span class="item-name showChat" data-action="showChat">{{item.name}}</span>
              <span class="item-controls centre">{{item.system.skillModifier}}</span>
              <span class="item-name centre rollable" data-action="skillTalentRoll"><i class="fa-solid fa-dice" alt="2d6"></i> {{item.system.psiCost}}</span>
              <span class="item-name centre roll-damage" data-action="rollDamage">{{twodsix_limitLength item.system.damage 8}}</span>
              <span class="item-name centre">{{item.system.shortdescr}}</span>
              <span class="item-controls centre">
                <a class="item-control item-edit" data-tooltip='{{localize "TWODSIX.Actor.Items.EditItem"}}' data-action="itemEdit"><i
                    class="fa-solid fa-pen-to-square"></i></a>
                <a class="item-control item-delete" data-tooltip='{{localize "TWODSIX.Actor.Items.DeleteItem"}}' data-action="itemDelete"><i class="fa-solid fa-trash"></i></a>
              </span>
            </span>
          </li>
        </ol>
      </div>
    {{/each}}
  </section>
</div>

<!-- Spells -->
{{#if settings.showSpells}}
<div><span class="pusher"></span>
  <span class="item-title">{{localize "TWODSIX.Actor.Items.SPELLS"}}</span>
  <div class="items-spells gear-header">
    <span class="item-name">{{localize "TWODSIX.Actor.Items.Name"}}</span>
    <span class="item-name centre">{{localize "TWODSIX.Actor.Skills.Level"}}</span>
    <span class="item-name centre">{{localize "TWODSIX.Actor.Items.Damage"}}</span>
    <span class="item-name centre">{{localize "TWODSIX.Actor.Items.ShortDescr"}}</span>
    <span class="item-name centre"><a class="item-control item-create"
        data-tooltip='{{localize "TWODSIX.Actor.Items.CreateItem"}}' data-type="spell" data-action="itemCreate"><i class="fa-solid fa-plus"></i></a></span>
  </div>
  <section class="item-list">
  {{#each container.spell as |item id|}}
  <div class="item gear" data-item-id="{{item.id}}">
    <ol class="ol-no-indent">
      <li class="flexrow" >
        <span class="items-spells">
          <span class="item-name showChat" data-action="showChat">{{item.name}}</span>
          <span class="item-name centre rollable" data-action="skillTalentRoll"><i class="fa-solid fa-dice" alt="2d6"></i>{{item.system.value}}</span>
          <span class="item-name centre roll-damage" data-action="rollDamage">{{twodsix_limitLength item.system.damage 8}}</span>
          <span class="item-name centre">{{item.system.shortdescr}}</span>
          <span class="item-controls centre">
            <a class="item-control item-edit" data-tooltip='{{localize "TWODSIX.Actor.Items.EditItem"}}' data-action="itemEdit"><i
                class="fa-solid fa-pen-to-square"></i></a>
            <a class="item-control item-delete" data-tooltip='{{localize "TWODSIX.Actor.Items.DeleteItem"}}' data-action="itemDelete"><i class="fa-solid fa-trash"></i></a>
          </span>
        </span>
      </li>
    </ol>
  </div>
  {{/each}}
</section>
</div>
{{/if}}
<div class="info-container">
  <div class="char-xp">
    <span class="item-title">{{localize "TWODSIX.Actor.Info.XP"}}</span>
      {{#if settings.useProseMirror}}
        <prose-mirror class="actor-editor" name="system.xpNotes" data-document-u-u-i-d="{{actor.uuid}}" value="{{system.xpNotes}}" collaborate="true" toggled="false" {{disabled (twodsix_getTooltip actor 'system.xpNotes')}}>
          {{{richText.xpNotes}}}
        </prose-mirror>
      {{else}}
        <div contenteditable="true" data-edit="system.xpNotes">{{{system.xpNotes}}}</div>
      {{/if}}
  </div>
  <div class="xp-details">
    <span class="xp-stat centre"><label for="system.experience.value">{{localize "TWODSIX.Actor.Info.Available"}}: </label><input type="number" value="{{system.experience.value}}" name="system.experience.value" id="system.experience.value" style="width: 5ch;"/><span class = "small-font">{{localize "TWODSIX.Actor.Info.Points"}}</span></span>
    <span class="xp-stat centre"><label for="system.experience.totalEarned">{{localize "TWODSIX.Actor.Info.TotalEarned"}}: </label><input type="number" value="{{system.experience.totalEarned}}" name="system.experience.totalEarned" style="width: 5ch;"/><span class = "small-font">{{localize "TWODSIX.Actor.Info.Points"}}</span></span>
  </div>

  <div class="char-description">
    <span class="item-title">{{localize "TWODSIX.Actor.Info.DESCRIPTION"}}</span>
    {{#if settings.useProseMirror}}
      <prose-mirror class="actor-editor" name="system.description" data-document-u-u-i-d="{{actor.uuid}}" value="{{system.description}}" collaborate="true" toggled="false" {{disabled (twodsix_getTooltip actor 'system.description')}}>
        {{{richText.description}}}
      </prose-mirror>
    {{else}}
      <div contenteditable="true" data-edit="system.description">{{{system.description}}}</div>
    {{/if}}
  </div>
  <div class="char-contacts">
    <span class="item-title">{{localize "TWODSIX.Actor.Info.CONTACTS"}}</span>
    {{#if settings.useProseMirror}}
      <prose-mirror class="actor-editor" name="system.contacts" data-document-u-u-i-d="{{actor.uuid}}" value="{{system.contacts}}" collaborate="true" toggled="false" {{disabled (twodsix_getTooltip actor 'system.contacts')}}>
        {{{richText.contacts}}}
      </prose-mirror>
    {{else}}
      <div contenteditable="true" data-edit="system.contacts">{{{system.contacts}}}</div>
    {{/if}}
  </div>
  <div class="char-bio">
    <span class="item-title">{{localize "TWODSIX.Actor.Info.BIOGRAPHY"}}</span>
    {{#if settings.useProseMirror}}
      <prose-mirror class="actor-editor" name="system.bio" data-document-u-u-i-d="{{actor.uuid}}" value="{{system.bio}}" collaborate="true" toggled="false"  {{disabled (twodsix_getTooltip actor 'system.bio')}}>
        {{{richText.bio}}}
      </prose-mirror>
    {{else}}
      <div contenteditable="true" data-edit="system.bio">{{{system.bio}}}</div>
    {{/if}}
  </div>
</div>
<div><span class="pusher"></span></div>
