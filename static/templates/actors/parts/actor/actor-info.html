<!---- LINKS ---->
<div style="margin: 0 1ch;">{{> "systems/twodsix/templates/actors/parts/actor/actor-reference.html"}}</div>

<!---- TRAITS ---->
<div><span class="pusher"></span>
  <span class="item-title">{{localize "TWODSIX.Actor.Items.TRAITS"}}</span>
  <div class="items-traits gear-header">
    <span class="item-name">{{localize "TWODSIX.Actor.Items.Name"}}</span>
    <span class="item-name centre">{{localize "TWODSIX.Actor.Skills.Level"}}</span>
    <span class="item-name centre">{{localize "TWODSIX.Actor.Items.ShortDescr"}}</span>
    <span class="item-name centre"><a class="item-control item-create"
        data-tooltip='{{localize "TWODSIX.Actor.Items.CreateItem"}}' data-type="trait"><i class="fa-solid fa-plus"></i></a></span>
  </div>
  <section class="item-list">
  {{#each_sort_item container.trait as |item id|}}
  <div class="item gear" data-item-id="{{item.id}}">
    <ol class="ol-no-indent">
      <li class="flexrow" >
        <span class="items-traits">
          <span class="item-name showChat">{{item.name}}</span>
          <span class="item-name centre">{{item.system.value}}</span>
          <span class="item-name centre">{{item.system.shortdescr}}
            <ul>
              {{#each item.effects.contents.[0].changes as |change|}}
              <li>{{change.key}} {{lookup @root.ACTIVE_EFFECT_MODES change.mode}} {{change.value}}</li>
              {{/each}}
            </ul>
          </span>
          <span class="item-controls centre">
            <a class="item-control item-edit" data-tooltip='{{localize "TWODSIX.Actor.Items.EditItem"}}'><i
                class="fa-solid fa-pen-to-square"></i></a>
            <a class="item-control item-delete" data-tooltip='{{localize "TWODSIX.Actor.Items.DeleteItem"}}'><i class="fa-solid fa-trash"></i></a>
          </span>
        </span>
      </li>
    </ol>
  </div>
  {{/each_sort_item}}
</section>
</div>

<!---- Spells ---->
{{#if settings.showSpells}}
<div><span class="pusher"></span>
  <span class="item-title">{{localize "TWODSIX.Actor.Items.SPELLS"}}</span>
  <div class="items-spells gear-header">
    <span class="item-name">{{localize "TWODSIX.Actor.Items.Name"}}</span>
    <span class="item-name centre">{{localize "TWODSIX.Actor.Skills.Level"}}</span>
    <span class="item-name centre">{{localize "TWODSIX.Actor.Items.Damage"}}</span>
    <span class="item-name centre">{{localize "TWODSIX.Actor.Items.ShortDescr"}}</span>
    <span class="item-name centre"><a class="item-control item-create"
        data-tooltip='{{localize "TWODSIX.Actor.Items.CreateItem"}}' data-type="spell"><i class="fa-solid fa-plus"></i></a></span>
  </div>
  <section class="item-list">
  {{#each_sort_item container.spell as |item id|}}
  <div class="item gear" data-item-id="{{item.id}}">
    <ol class="ol-no-indent">
      <li class="flexrow" >
        <span class="items-spells">
          <span class="item-name showChat">{{item.name}}</span>
          <span class="item-name centre rollable"><i class="fa-solid fa-dice" alt="2d6"></i>{{item.system.value}}</span>
          <span class="item-name centre roll-damage">{{twodsix_limitLength item.system.damage 8}}</span>
          <span class="item-name centre">{{item.system.shortdescr}}</span>
          <span class="item-controls centre">
            <a class="item-control item-edit" data-tooltip='{{localize "TWODSIX.Actor.Items.EditItem"}}'><i
                class="fa-solid fa-pen-to-square"></i></a>
            <a class="item-control item-delete" data-tooltip='{{localize "TWODSIX.Actor.Items.DeleteItem"}}'><i class="fa-solid fa-trash"></i></a>
          </span>
        </span>
      </li>
    </ol>
  </div>
  {{/each_sort_item}}
</section>
</div>
{{/if}}
<div class="info-container">
  <div class="char-xp">
    <span class="item-title">{{localize "TWODSIX.Actor.Info.XP"}}</span>
      {{#if settings.useProseMirror}}
        {{editor richText.xpNotes target="system.xpNotes" button=true owner=owner editable=editable async=true engine="prosemirror" collaborate=true}}
      {{else}}
        <div contenteditable="true" data-edit="system.xpNotes">{{{system.xpNotes}}}</div>
      {{/if}}
  </div>
  <div class="xp-details">
    <span class="xp-stat centre"><label for="system.experience.value">{{localize "TWODSIX.Actor.Info.Available"}}: </label><input type="number" value="{{system.experience.value}}" name="system.experience.value" id="system.experience.value" style="width: 5ch;"/><span class = "small-font">{{localize "TWODSIX.Actor.Info.Points"}}</span></span>
    <span class="xp-stat centre"><label for="system.experience.totalEarned">{{localize "TWODSIX.Actor.Info.TotalEarned"}}: </label><input type="number" value="{{system.experience.totalEarned}}" name="system.experience.totalEarned" style="width: 5ch;"/><span class = "small-font">{{localize "TWODSIX.Actor.Info.Points"}}</span></span>
  </div>

  <div class="char-description">
    <span class="item-title">{{localize "TWODSIX.Actor.Info.DESCRIPTION"}}</span>
    {{#if settings.useProseMirror}}
      {{editor richText.description target="system.description" button=true owner=owner editable=editable async=true engine="prosemirror" collaborate=true}}
    {{else}}
      <div contenteditable="true" data-edit="system.description">{{{system.description}}}</div>
    {{/if}}
  </div>
  <div class="char-contacts">
    <span class="item-title">{{localize "TWODSIX.Actor.Info.CONTACTS"}}</span>
    {{#if settings.useProseMirror}}
      {{editor richText.contacts target="system.contacts" button=true owner=owner editable=editable async=true engine="prosemirror" collaborate=true}}
    {{else}}
      <div contenteditable="true" data-edit="system.contacts">{{{system.contacts}}}</div>
    {{/if}}
  </div>
  <div class="char-bio">
    <span class="item-title">{{localize "TWODSIX.Actor.Info.BIOGRAPHY"}}</span>
    {{#if settings.useProseMirror}}
      {{editor richText.bio target="system.bio" button=true owner=owner editable=editable async=true engine="prosemirror" collaborate=true}}
    {{else}}
      <div contenteditable="true" data-edit="system.bio">{{{system.bio}}}</div>
    {{/if}}
  </div>
</div>
<div><span class="pusher"></span></div>
